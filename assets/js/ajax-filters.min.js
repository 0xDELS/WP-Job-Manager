jQuery(document).ready(function(a){$supports_html5_history=window.history&&window.history.pushState?!0:!1;var b=[];a(".job_listings").on("update_results",function(c,d,e){var f="",g=a(this),h=g.find(".job_filters"),i=g.find(".showing_jobs"),j=g.find(".job_listings"),k=g.data("per_page"),l=g.data("orderby"),m=g.data("order"),n=g.data("featured"),o=g.data("filled"),p=a("div.job_listings").index(this),q=g.data("current_page");if(b[p]&&b[p].abort(),d>q&&(q=d,g.data("current_page",q)),e||(a(j).addClass("loading"),a("li.job_listing, li.no_job_listings_found",j).css("visibility","hidden"),d>1&&1!=g.data("show_pagination")&&(a(j).before('<a class="load_more_jobs load_previous" href="#"><strong>'+job_manager_ajax_filters.i18n_load_prev_listings+"</strong></a>"),g.find(".load_more_jobs").data("page",d))),1==g.data("show_filters")){var r=[];a(':input[name="filter_job_type[]"]:checked, :input[name="filter_job_type[]"][type="hidden"], :input[name="filter_job_type"]',h).each(function(){r.push(a(this).val())});var s=h.find(":input[name^=search_categories], :input[name^=search_categories]").map(function(){return a(this).val()}).get(),t="",u="",v=h.find(":input[name=search_keywords]"),w=h.find(":input[name=search_location]");v.val()!==v.attr("placeholder")&&(t=v.val()),w.val()!==w.attr("placeholder")&&(u=w.val()),f={action:"job_manager_get_listings",search_keywords:t,search_location:u,search_categories:s,filter_job_type:r,per_page:k,orderby:l,order:m,page:d,featured:n,filled:o,show_pagination:g.data("show_pagination"),form_data:h.serialize()}}else{var s=g.data("categories"),t=g.data("keywords"),u=g.data("location");s&&(s=s.split(",")),f={action:"job_manager_get_listings",search_categories:s,search_keywords:t,search_location:u,per_page:k,orderby:l,order:m,page:d,featured:n,filled:o,show_pagination:g.data("show_pagination")}}b[p]=a.ajax({type:"POST",url:job_manager_ajax_filters.ajax_url,data:f,success:function(b){if(b)try{b.indexOf("<!--WPJM-->")>=0&&(b=b.split("<!--WPJM-->")[1]),b.indexOf("<!--WPJM_END-->")>=0&&(b=b.split("<!--WPJM_END-->")[0]);var c=a.parseJSON(b);c.showing?a(i).show().html("<span>"+c.showing+"</span>"+c.showing_links):a(i).hide(),c.showing_all?a(i).addClass("wp-job-manager-showing-all"):a(i).removeClass("wp-job-manager-showing-all"),c.html&&("prepend"===e?a(j).prepend(c.html):e?a(j).append(c.html):a(j).html(c.html)),1==g.data("show_pagination")?(g.find(".job-manager-pagination").remove(),c.pagination&&g.append(c.pagination)):(c.found_jobs&&c.max_num_pages!=d?d>q&&a(".load_more_jobs",g).show():a(".load_more_jobs:not(.load_previous)",g).hide(),a(".load_more_jobs",g).removeClass("loading"),a("li.job_listing",j).css("visibility","visible")),a(j).removeClass("loading"),g.triggerHandler("updated_results",c)}catch(f){}}})}),a("#search_keywords, #search_location, .job_types :input, #search_categories").change(function(){var b=a(this).closest("div.job_listings");b.triggerHandler("update_results",[1,!1])}).on("keyup",function(b){13===b.which&&a(this).trigger("change")}),a(".job_filters").on("click",".reset",function(){var b=a(this).closest("div.job_listings"),c=a(this).closest("form");return c.find(':input[name="search_keywords"]').not(':input[type="hidden"]').val(""),c.find(':input[name="search_location"]').not(':input[type="hidden"]').val(""),c.find(':input[name^="search_categories"]').not(':input[type="hidden"]').val(0).trigger("chosen:updated"),a(':input[name="filter_job_type[]"]',c).not(':input[type="hidden"]').attr("checked","checked"),b.triggerHandler("reset"),b.triggerHandler("update_results",[1,!1]),!1}),a("body").on("click",".load_more_jobs",function(){var b=a(this).closest("div.job_listings"),c=parseInt(a(this).data("page")||1),d="append";return a(this).addClass("loading"),a(this).is(".load_previous")?(c-=1,d="prepend",1===c?a(this).remove():a(this).data("page",c)):(c+=1,a(this).data("page",c),$supports_html5_history&&history.replaceState({id:"job_manager_page"},"",a.param.fragment(document.URL,"p="+c))),b.triggerHandler("update_results",[c,d]),!1}),a("div.job_listings").on("click",".job-manager-pagination a",function(){var b=a(this).closest("div.job_listings"),c=a(this).data("page");return $supports_html5_history&&history.replaceState({id:"job_manager_page"},"",a.param.fragment(document.URL,"p="+c)),b.triggerHandler("update_results",[c,!1]),!1}),a.isFunction(a.fn.chosen)&&(1==job_manager_ajax_filters.is_rtl&&a('select[name^="search_categories"]').addClass("chosen-rtl"),a('select[name^="search_categories"]').chosen({search_contains:!0}));var c=1;if($supports_html5_history){var d=a.deparam.fragment();d.p&&(c=d.p)}a(".job_filters").each(function(){var b=a(this).closest("div.job_listings");b.triggerHandler("update_results",[c,!1])})});