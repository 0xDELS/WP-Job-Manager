jQuery(document).ready(function(e){var t;e(".job_listings").on("update_results",function(n,r,i){t&&t.abort();var s="",o=e(this),u=o.find(".job_filters"),a=o.find(".showing_jobs"),f=o.find(".job_listings"),l=o.data("per_page"),c=o.data("orderby"),h=o.data("order");if(i)e(".load_more_jobs",o).addClass("loading");else{e(f).addClass("loading");e("li.job_listing",f).css("visibility","hidden")}if(o.data("show_filters")){var p=[];e(':input[name="filter_job_type[]"]:checked, :input[name="filter_job_type[]"][type="hidden"]',u).each(function(){p.push(e(this).val())});var d=u.find(":input[name^=search_categories], :input[name^=search_categories]").map(function(){return e(this).val()}).get(),v="",m="",g=u.find(":input[name=search_keywords]"),y=u.find(":input[name=search_location]");g.val()!==g.attr("placeholder")&&(v=g.val());y.val()!==y.attr("placeholder")&&(m=y.val());s={action:"job_manager_get_listings",search_keywords:v,search_location:m,search_categories:d,filter_job_type:p,per_page:l,orderby:c,order:h,page:r,form_data:u.serialize()}}else s={action:"job_manager_get_listings",search_categories:o.data("categories").split(","),search_keywords:o.data("keywords"),search_location:o.data("location"),per_page:l,orderby:c,order:h,page:r};t=e.ajax({type:"POST",url:job_manager_ajax_filters.ajax_url,data:s,success:function(t){if(t)try{t.indexOf("<!--WPJM-->")>=0&&(t=t.split("<!--WPJM-->")[1]);t.indexOf("<!--WPJM_END-->")>=0&&(t=t.split("<!--WPJM_END-->")[0]);var n=e.parseJSON(t);n.showing?e(a).show().html("").append("<span>"+n.showing+"</span>"+n.showing_links):e(a).hide();n.html&&(i?e(f).append(n.html):e(f).html(n.html));!n.found_jobs||n.max_num_pages===r?e(".load_more_jobs",o).hide():e(".load_more_jobs",o).show().data("page",r);e(f).removeClass("loading");e(".load_more_jobs",o).removeClass("loading");e("li.job_listing",f).css("visibility","visible")}catch(s){}}})});e("#search_keywords, #search_location, .job_types input, #search_categories").change(function(){var t=e(this).closest("div.job_listings");t.trigger("update_results",[1,!1])}).change();e(".job_filters").on("click",".reset",function(){var t=e(this).closest("div.job_listings"),n=e(this).closest("form");n.find(":input[name=search_keywords]").val("");n.find(":input[name=search_location]").val("");n.find(":input[name^=search_categories]").val(0);e(':input[name="filter_job_type[]"]',n).attr("checked","checked");t.trigger("reset");t.trigger("update_results",[1,!1]);return!1});e(".load_more_jobs").click(function(){var t=e(this).closest("div.job_listings"),n=e(this).data("page");n?n=parseInt(n):n=1;e(this).data("page",n+1);t.trigger("update_results",[n+1,!0]);return!1})});